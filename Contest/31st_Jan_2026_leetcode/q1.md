# Reverse Letters Then Special Characters — Notes

---

## Problem Restatement

You are given a string `s` consisting of:

* Lowercase English letters (`a` to `z`)
* Special characters (`!@#$%^&*()`)

Your task is to perform **two reversals independently**:

1. Reverse **only the lowercase letters** and place them back at their **original letter positions**
2. Reverse **only the special characters** and place them back at their **original special-character positions**

Return the final resulting string.

---

## Core Idea

The key idea is **separation by type**:

* Letters and special characters must **not mix**
* Their **positions are fixed by type**, only their **order changes**

So the solution works in **three phases**:

1. Collect indices and values separately
2. Reverse values and place them back using stored indices
3. Convert the final character list back into a string

---

## Data Structures Used

### For lowercase letters

* `idx_list_eng_ltr` → stores indices of letters
* `val_list_eng_ltr` → stores letter characters

### For special characters

* `idx_list_spl_chr_ltr` → stores indices of special characters
* `val_list_spl_chr_ltr` → stores special characters

---

## Step 1: Separating Indices and Values

```python
for idx, val in enumerate(s):
    if 'a' <= val <= 'z':
        idx_list_eng_ltr.append(idx)
        val_list_eng_ltr.append(val)
    else:
        idx_list_spl_chr_ltr.append(idx)
        val_list_spl_chr_ltr.append(val)
```

### What happens here?

* `enumerate(s)` gives `(index, character)`
* Letters and special characters are **classified**
* Indices and values are stored **separately**
* The original string `s` is **not modified yet**

This separation allows **independent reversal**.

---

## Step 2: Converting String to List

```python
s = list(s)
```

### Why is this necessary?

* **Strings are immutable in Python**
* You **cannot assign** to `s[i]` if `s` is a string
* Lists are **mutable**, so characters can be replaced

After this step:

```
s becomes a list of characters
```

---

## Step 3: Reversing Lowercase Letters

```python
j = 0
for i in range(len(val_list_eng_ltr) - 1, -1, -1):
    s[idx_list_eng_ltr[j]] = val_list_eng_ltr[i]
    j += 1
```

### Logic

* Traverse `val_list_eng_ltr` **from end to start**
* Place each character at the **original letter index**
* `j` ensures indices are filled **from left to right**

This achieves:

```
Letters reversed, positions preserved
```

---

## Step 4: Reversing Special Characters

```python
j = 0
for i in range(len(val_list_spl_chr_ltr) - 1, -1, -1):
    s[idx_list_spl_chr_ltr[j]] = val_list_spl_chr_ltr[i]
    j += 1
```

### Logic

* Same idea as letters
* Special characters are reversed **independently**
* They are placed back only at **special-character indices**

---

## Step 5: Understanding `"" .join(s)` (Very Important)

```python
return "".join(s)
```

### What is `s` at this point?

* `s` is a **list of characters**, for example:

  ```python
  ['f', 'a', 'd', '@', 'c', 'b', '#', 'e', ')']
  ```

---

### Why `join` is needed

* The problem expects a **string**
* But after modifications, `s` is a **list**
* Python does **not automatically convert lists to strings**

---

### How `join` works

```python
"separator".join(iterable)
```

* The separator here is `""` (empty string)
* It means:

  ```
  join all elements without adding anything in between
  ```

Example:

```python
"".join(['a', 'b', 'c'])
```

Output:

```
"abc"
```

---

### In this solution

```python
"".join(s)
```

Means:

* Take every character in the list `s`
* Concatenate them **in order**
* Produce the final string

---

### Why not use `str(s)`?

```python
str(['a','b'])
```

Gives:

```
"['a', 'b']"
```

❌ This is **not the desired output**

Only `join` produces the correct string format.

---

## Final Output Guarantee

* Letters are reversed **only among letters**
* Special characters are reversed **only among themselves**
* Original positions by type are preserved
* Time complexity: **O(n)**
* Space complexity: **O(n)**

---

## Key Takeaways

* **Separate → Reverse → Reinsert** is the core pattern
* Strings must be converted to lists for mutation
* `"" .join(s)` is the **final reconstruction step**
* `join` is the **only correct way** to convert a character list back to a string

---

